<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ุงูุญุถุฑู ููุจุฑูุฌูุงุช</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header class="site-header">
  <div class="inner">
    <div class="logo">๐ป ุงูุญุถุฑู ููุจุฑูุฌูุงุช</div>
    <nav class="main-nav">
      <a href="#home" onclick="showSection('home')">ุงูุฑุฆูุณูุฉ</a>
      <a href="#projects" onclick="showSection('projects')">ูุดุงุฑูุนูุง</a>
      <a href="#contact" onclick="showSection('contact')">ุชูุงุตู</a>
      <a href="#" id="openDashboardBtn" onclick="showSection('dashboard')">ููุญุฉ ุงูุชุญูู</a>
    </nav>
    <div class="auth-area">
      <button class="btn ghost" id="openLoginBtn" onclick="openLoginModal()">ุชุณุฌูู ุงูุฏุฎูู</button>
      <button class="btn" id="logoutBtn" style="display:none" onclick="signOutUser()">ุฎุฑูุฌ</button>
    </div>
  </div>
</header>

<section id="home" class="page">
  <div class="hero">
    <div class="hero-left">
      <h1>ูุญู ุญููู ุฑูููุฉ ุงุญุชุฑุงููุฉ</h1>
      <p>ูุตููู ููุทููุฑ ููุงูุน ูุชุทุจููุงุช ูุชูุงููุฉ ุชูุงุณุจ ุงุญุชูุงุฌุงุช ุงููุคุณุณุงุช ูุงูุดุฑูุงุช.</p>
      <button class="btn" onclick="showSection('projects')">ุดุงูุฏ ูุดุงุฑูุนูุง</button>
    </div>
    <div class="hero-right">
      <img src="https://images.unsplash.com/photo-1555949963-aa79dcee981c?auto=format&fit=crop&w=800&q=80" alt="Dev">
    </div>
  </div>
</section>

<section id="projects" class="page" style="display:none">
  <h2>ุฃุจุฑุฒ ูุดุงุฑูุนูุง</h2>
  <div id="projectsGrid" class="projects-grid"></div>
</section>

<section id="contact" class="page" style="display:none">
  <h2>ุชูุงุตู ูุนูุง</h2>
  <p>๐ง <a href="mailto:babiker9991@gmail.com">babiker9991@gmail.com</a></p>
  <p>๐ +249900599203</p>
</section>

<section id="dashboard" class="page" style="display:none">
  <h2>ููุญุฉ ุงูุชุญูู (ุงููุดุฑู)</h2>
  <div id="adminBox" style="display:none">
    <h3>ุฃุถู ูุดุฑูุน ุฌุฏูุฏ</h3>
    <input id="projTitle" placeholder="ุนููุงู ุงููุดุฑูุน">
    <textarea id="projDesc" placeholder="ูุตู ุงููุดุฑูุน"></textarea>
    <input type="file" id="projImage" accept="image/*">
    <button class="btn" id="addProjectBtn">ูุดุฑ ุงููุดุฑูุน</button>
    <p id="adminStatus"></p>
    <hr>
    <h3>ูุงุฆูุฉ ุงููุดุงุฑูุน</h3>
    <div id="adminProjectsList"></div>
  </div>
  <div id="notAdminMsg" style="display:none">
    <p>ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู ููุดุฑู ูุนุฑุถ ููุญุฉ ุงูุชุญูู.</p>
  </div>
</section>

<div id="loginModal" style="display:none">
  <div class="sheet">
    <button onclick="closeLoginModal()">โ</button>
    <h3>ุชุณุฌูู ุงูุฏุฎูู (ูุดุฑู)</h3>
    <input id="loginEmail" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู">
    <input id="loginPassword" placeholder="ูููุฉ ุงููุฑูุฑ" type="password">
    <button id="loginBtn">ุฏุฎูู</button>
    <p id="loginStatus"></p>
  </div>
</div>

<footer>
  <p>ยฉ 2025 ุงูุญุถุฑู ููุจุฑูุฌูุงุช</p>
</footer>

<!-- Firebase SDKs (compat) -->
<script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-storage-compat.js"></script>

<!-- Firebase config + app.js -->
<script>
// ุฅุนุฏุงุฏ Firebase (ุถุน ูุนูููุงุช ูุดุฑูุนู ููุง)
const firebaseConfig = {
  apiKey: "AIzaSyDxoEJLaGcEy7s1P2nE2_bDniS71ldI31Q",
  authDomain: "alhadari-net.firebaseapp.com",
  databaseURL: "https://alhadari-net-default-rtdb.firebaseio.com",
  projectId: "alhadari-net",
  storageBucket: "alhadari-net.firebasestorage.app",
  messagingSenderId: "465757130283",
  appId: "1:465757130283:web:10128c19bef6171e5e246e",
  measurementId: "G-XLQB1M9FHQ"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.database();
const storage = firebase.storage();

// ุถุน UID ุงููุดุฑู ุจุนุฏ ุฅูุดุงุฆู ูู Firebase Auth
const ADMIN_UID = "ุถุน_UID_ููุง";

// ====== ูุธุงุฆู ูุงุฌูุฉ ุงููุณุชุฎุฏู ======
function showSection(id){
  document.querySelectorAll('.page').forEach(p=>p.style.display='none');
  const el = document.getElementById(id);
  if(el) el.style.display='block';
}

function openLoginModal(){ document.getElementById('loginModal').style.display='flex'; }
function closeLoginModal(){ document.getElementById('loginModal').style.display='none'; }

function signOutUser(){ auth.signOut().then(()=>alert('ุชู ุงูุฎุฑูุฌ')); }

// ุฅุถุงูุฉ ูุดุฑูุน
document.getElementById('addProjectBtn').addEventListener('click', async ()=>{
  const title = document.getElementById('projTitle').value.trim();
  const desc = document.getElementById('projDesc').value.trim();
  const file = document.getElementById('projImage').files[0];
  const status = document.getElementById('adminStatus');
  status.textContent = '';
  if(!title || !desc){ status.textContent='ุงููุฃ ุงูุนููุงู ูุงููุตู'; return; }
  if(!auth.currentUser || auth.currentUser.uid!==ADMIN_UID){ status.textContent='ุฃูุช ูุณุช ูุดุฑูุงู'; return; }

  status.textContent='โณ ุฌุงุฑู ุฑูุน ุงููุดุฑูุน...';
  try{
    const newRef = db.ref('projects').push();
    const id = newRef.key;
    let imageUrl='';
    if(file){
      const storageRef = storage.ref('projects/'+id+'_'+file.name);
      await storageRef.put(file);
      imageUrl = await storageRef.getDownloadURL();
    }
    await newRef.set({ title, desc, image: imageUrl, createdAt: Date.now() });
    status.textContent='โ ุชู ูุดุฑ ุงููุดุฑูุน';
    document.getElementById('projTitle').value='';
    document.getElementById('projDesc').value='';
    document.getElementById('projImage').value='';
  }catch(e){ status.textContent='โ ุฎุทุฃ: '+e.message; console.error(e);}
});

// ุชุณุฌูู ุงูุฏุฎูู
document.getElementById('loginBtn').addEventListener('click', ()=>{
  const email = document.getElementById('loginEmail').value.trim();
  const pw = document.getElementById('loginPassword').value.trim();
  const status = document.getElementById('loginStatus');
  status.textContent='';
  if(!email || !pw){ status.textContent='ุงููุฃ ุงูุจุฑูุฏ ููููุฉ ุงููุฑูุฑ'; return; }
  auth.signInWithEmailAndPassword(email,pw)
      .then(()=>{ status.textContent='ุชู ุชุณุฌูู ุงูุฏุฎูู'; closeLoginModal(); })
      .catch(e=>{ status.textContent='ุฎุทุฃ: '+e.message; console.error(e); });
});

// Auth state
auth.onAuthStateChanged(user=>{
  if(user){
    document.getElementById('openLoginBtn').style.display='none';
    document.getElementById('logoutBtn').style.display='inline-block';
    if(user.uid===ADMIN_UID){ document.getElementById('adminBox').style.display='block'; document.getElementById('notAdminMsg').style.display='none'; }
    else { document.getElementById('adminBox').style.display='none'; document.getElementById('notAdminMsg').style.display='block'; }
  } else {
    document.getElementById('openLoginBtn').style.display='inline-block';
    document.getElementById('logoutBtn').style.display
